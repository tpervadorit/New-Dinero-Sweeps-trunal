{
    "sourceFile": "deploy.sh",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754371678509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754371678509,
            "name": "Commit-0",
            "content": "#!/bin/bash\r\n\r\n# Deployment script for dinerosweeps.com\r\n# This script will be executed by GitHub Actions\r\n\r\nset -e  # Exit on any error\r\n\r\necho \"🚀 Starting deployment...\"\r\n\r\n# Navigate to project directory\r\ncd ~/New-Dinero1\r\n\r\n# Pull latest changes\r\necho \"📥 Pulling latest changes...\"\r\n# Force clean pull (discard all local changes)\r\ngit fetch origin\r\ngit reset --hard origin/main\r\n\r\n# Install backend dependencies\r\necho \"📦 Installing backend dependencies...\"\r\ncd backend\r\n# Clean install to ensure all dependencies are properly installed\r\nrm -rf node_modules package-lock.json\r\nnpm install\r\n\r\n# Install frontend dependencies\r\necho \"📦 Installing frontend dependencies...\"\r\ncd ../frontend\r\n# Clean install to ensure all dependencies are properly installed\r\nrm -rf node_modules package-lock.json\r\nnpm install\r\n\r\n# Build frontend\r\necho \"🔨 Building frontend...\"\r\nnpm run build\r\n\r\n# Clean up and restart PM2 processes\r\necho \"🔄 Restarting applications...\"\r\npm2 stop all 2>/dev/null || true\r\npm2 delete all 2>/dev/null || true\r\npm2 start npm --name \"api-backend\" --cwd backend -- run start:dev\r\npm2 start npm --name \"frontend\" --cwd frontend -- run start\r\n\r\n# Wait for applications to start\r\necho \"⏳ Waiting for applications to start...\"\r\nsleep 15\r\n\r\n# Check PM2 status\r\necho \"📊 PM2 Status:\"\r\npm2 status\r\n\r\n# Test deployment\r\necho \"🧪 Testing deployment...\"\r\nif curl -f https://dinerosweeps.com/api/v1/health; then\r\n    echo \"✅ Backend API is responding\"\r\nelse\r\n    echo \"❌ Backend API test failed\"\r\n    exit 1\r\nfi\r\n\r\nif curl -f https://dinerosweeps.com; then\r\n    echo \"✅ Frontend is responding\"\r\nelse\r\n    echo \"❌ Frontend test failed\"\r\n    exit 1\r\nfi\r\n\r\necho \"🎉 Deployment completed successfully!\" #\u0000 \u0000U\u0000p\u0000d\u0000a\u0000t\u0000e\u0000d\u0000 \u0000d\u0000e\u0000p\u0000l\u0000o\u0000y\u0000m\u0000e\u0000n\u0000t\u0000 \u0000s\u0000c\u0000r\u0000i\u0000p\u0000t\u0000\r\n\u0000\r\n\u0000"
        }
    ]
}