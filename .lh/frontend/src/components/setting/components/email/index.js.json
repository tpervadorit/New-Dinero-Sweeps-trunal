{
    "sourceFile": "frontend/src/components/setting/components/email/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754364715389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754364715389,
            "name": "Commit-0",
            "content": "import { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport useEmail from '../../hooks/useEmail';\r\nimport { Controller } from 'react-hook-form';\r\nimport CustomToast from '@/common/components/custom-toaster';\r\n\r\nconst Email = () => {\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    onOtpSubmit,\r\n    emailSubmitted,\r\n    handleEmailSubmit,\r\n    emailVerified,\r\n    message,\r\n    showToast,\r\n    status,\r\n    setShowToast,\r\n    isOtpLoading,\r\n    isEmailLoading,\r\n    email,\r\n    timer,\r\n    isTimerActive,\r\n  } = useEmail();\r\n\r\n  return (\r\n    <section className=\"border border-[rgb(var(--lb-blue-300))] rounded\">\r\n      {emailVerified ? (\r\n        <div className=\"p-4 border-b border-[rgb(var(--lb-blue-300))]\">\r\n          <div className=\"mb-2\">\r\n            <div className=\"text-white text-[14px] font-bold\">\r\n              Current Email\r\n            </div>\r\n            <div className=\"text-[rgb(var(--lb-blue-250))] text-[13px] mb-2\">\r\n              (Please check weekly airdrop email every weekend. Don&apos;t miss your\r\n              bonus.)\r\n            </div>\r\n\r\n            <Input\r\n              value={email}\r\n              className=\"border border-[rgb(var(--lb-blue-200))] w-[90%]\"\r\n              disabled\r\n            />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <form onSubmit={handleSubmit(handleEmailSubmit)}>\r\n            <div className=\"p-4 border-b border-[rgb(var(--lb-blue-300))]\">\r\n              <div className=\"mb-2\">\r\n                <div className=\"text-white text-[14px] font-bold\">Email</div>\r\n                <div className=\"text-[rgb(var(--lb-blue-250))] text-[13px] mb-2\">\r\n                  (Gear up, because every week you&apos;ll unlock an epic bonus\r\n                  email)\r\n                </div>\r\n                <Controller\r\n                  control={control}\r\n                  name=\"userEmail\"\r\n                  rules={{\r\n                    required: 'Please enter email',\r\n                    pattern: {\r\n                      value: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\r\n                      message:\r\n                        'Only the following email providers are available:Google, Yahoo, Apple.',\r\n                    },\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    const error = fieldState?.error;\r\n                    return (\r\n                      <>\r\n                        <div className=\"flex items-center space-x-2 w-[50%]\">\r\n                          <div\r\n                            className={`${error ? 'border-red-500' : 'border-gray-300'} transition-colors duration-200`}\r\n                          >\r\n                            <Input\r\n                              className=\"border border-[rgb(var(--lb-blue-200))] w-[200%] \"\r\n                              {...field}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        {error && (\r\n                          <div\r\n                            className={`text-red-500 text-sm absolute transition-opacity duration-300 ease-in-out ${\r\n                              error\r\n                                ? 'opacity-100 translate-y-0'\r\n                                : 'opacity-0 translate-y-2'\r\n                            }`}\r\n                          >\r\n                            {error?.message}\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-0 p-4 flex justify-end border-b border-[rgb(var(--lb-blue-300))]\">\r\n              <Button\r\n                loading={isEmailLoading}\r\n                disabled={isEmailLoading || emailSubmitted}\r\n                type=\"submit\"\r\n                className=\"bg-green-500 py-2  text-white rounded hover:bg-green-600\"\r\n              >\r\n                Send\r\n              </Button>\r\n            </div>\r\n          </form>\r\n\r\n          <form onSubmit={handleSubmit(onOtpSubmit)}>\r\n            <div className=\"p-4 border-b border-[rgb(var(--lb-blue-300))]\">\r\n              <div className=\"mb-2\">\r\n                <div className=\"text-white text-[14px] font-bold\">\r\n                  Verification Code <span className=\"text-red-500\">*</span>\r\n                </div>\r\n                <div className=\"text-[rgb(var(--lb-blue-250))] text-[13px] mb-2\">\r\n                  (haven&apos;t receive? please check junk email)\r\n                </div>\r\n                <Controller\r\n                  control={control}\r\n                  name=\"otp\"\r\n                  rules={{\r\n                    required:\r\n                      emailSubmitted && 'Please enter your Verification Code',\r\n                  }}\r\n                  render={({ field, fieldState }) => {\r\n                    const error = fieldState?.error;\r\n                    return (\r\n                      <>\r\n                        <div className=\"flex items-center space-x-2 w-[50%]\">\r\n                          <div\r\n                            className={`${error ? 'border-red-500' : 'border-gray-300'} transition-colors duration-200`}\r\n                          >\r\n                            <Input\r\n                              className=\"border border-[rgb(var(--lb-blue-200))] w-[200%]\"\r\n                              {...field}\r\n                              type=\"tel\"\r\n                              maxLength={6}\r\n                              pattern=\"[0-9]*\"\r\n                              inputMode=\"numeric\"\r\n                              onInput={(e) => {\r\n                                e.target.value = e.target.value.replace(\r\n                                  /[^0-9]/g,\r\n                                  ''\r\n                                ); // Removes non-numeric characters\r\n                              }}\r\n                              disabled={!emailSubmitted || isOtpLoading}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        {error && (\r\n                          <div\r\n                            className={`text-red-500 text-sm absolute transition-opacity duration-300 ease-in-out ${\r\n                              error\r\n                                ? 'opacity-100 translate-y-0'\r\n                                : 'opacity-0 translate-y-2'\r\n                            }`}\r\n                          >\r\n                            {error?.message}\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    );\r\n                  }}\r\n                />\r\n              </div>\r\n              {isTimerActive && (\r\n                <div className=\"text-md font-medium text-green-500 w-fit rounded-xl mt-2\">\r\n                  OTP expires in:{' '}\r\n                  {String(Math.floor(timer / 60)).padStart(2, '0')}:\r\n                  {String(timer % 60).padStart(2, '0')}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mt-0 p-4 flex justify-between\">\r\n              <div className=\"text-[rgb(var(--lb-blue-250))] text-[13px]\">\r\n                If you don&apos;t receive the email, you can check it in spam\r\n              </div>\r\n              <Button\r\n                loading={isOtpLoading}\r\n                disabled={!emailSubmitted || isOtpLoading}\r\n                type=\"submit\"\r\n                className=\"bg-green-500 py-2  text-white rounded hover:bg-green-600\"\r\n              >\r\n                Submit\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </>\r\n      )}\r\n      <CustomToast\r\n        showToast={showToast}\r\n        setShowToast={setShowToast}\r\n        message={message}\r\n        status={status}\r\n      />\r\n    </section>\r\n  );\r\n};\r\nexport default Email;\r\n"
        }
    ]
}